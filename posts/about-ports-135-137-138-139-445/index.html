<!DOCTYPE html>
<html lang="zh-TW">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Network-135、137、138、139、445說明 - 資安工作筆記</title><meta name="Description" content="This is 資安工作筆記"><meta property="og:title" content="Network-135、137、138、139、445說明" />
<meta property="og:description" content="這5個 Port 在工作上時不時會遇到，在一知半解的狀況下，常常會沒辦法判斷真時的發生狀況。因此參考網路上的介紹做一些整理，希望能這對這些Port有更" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://amingosec.github.io/posts/about-ports-135-137-138-139-445/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-05T16:54:20+00:00" />
<meta property="article:modified_time" content="2021-05-05T16:54:20+00:00" /><meta property="og:site_name" content="資安工作筆記" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Network-135、137、138、139、445說明"/>
<meta name="twitter:description" content="這5個 Port 在工作上時不時會遇到，在一知半解的狀況下，常常會沒辦法判斷真時的發生狀況。因此參考網路上的介紹做一些整理，希望能這對這些Port有更"/>
<meta name="application-name" content="資安工作筆記">
<meta name="apple-mobile-web-app-title" content="資安工作筆記"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://amingosec.github.io/posts/about-ports-135-137-138-139-445/" /><link rel="prev" href="https://amingosec.github.io/posts/netcat-nc-commands/" /><link rel="next" href="https://amingosec.github.io/posts/pstools/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Network-135、137、138、139、445說明",
        "inLanguage": "zh-TW",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/amingosec.github.io\/posts\/about-ports-135-137-138-139-445\/"
        },"genre": "posts","keywords": "CIFS, 網路管理, NetBIOS, Network, SMB, WINS","wordcount":  1866 ,
        "url": "https:\/\/amingosec.github.io\/posts\/about-ports-135-137-138-139-445\/","datePublished": "2021-05-05T16:54:20+00:00","dateModified": "2021-05-05T16:54:20+00:00","publisher": {
            "@type": "Organization",
            "name": "作者"},"author": {
                "@type": "Person",
                "name": "作者"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="" data-header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="資安工作筆記">資安工作筆記</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> tags </a><a class="menu-item" href="/categories/"> 分類 </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切換主題">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="資安工作筆記">資安工作筆記</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">tags</a><a class="menu-item" href="/categories/" title="">分類</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切換主題">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目錄</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Network-135、137、138、139、445說明</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>作者</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2021-05-05">2021-05-05</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;約 1866 字&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;預計閱讀 4 分鐘&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>目錄</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#tcp135-rpc">TCP/135 RPC</a></li>
    <li><a href="#netbios-network-basic-inputoutput-system-簡介">NetBIOS (Network Basic Input/Output System) 簡介</a></li>
    <li><a href="#tcpudp-137-netbios-ns">TCP/UDP 137 NetBIOS-NS</a></li>
    <li><a href="#udp-138-netbios-datagram">UDP 138 NetBIOS-Datagram</a></li>
    <li><a href="#tcp139-netbios-session">TCP/139 NetBIOS-Session</a></li>
    <li><a href="#445埠">445埠</a></li>
    <li><a href="#參考網站">參考網站</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>這5個 Port 在工作上時不時會遇到，在一知半解的狀況下，常常會沒辦法判斷真時的發生狀況。因此參考網路上的介紹做一些整理，希望能這對這些Port有更多瞭解。</p>
<h2 id="tcp135-rpc">TCP/135 RPC</h2>
<p>在許多「網管」眼裡，135埠是最讓人捉摸不透的埠，因為他們中的大多數都無法明確地了解到135埠的真正作用，也不清楚該埠到底會有哪些潛在的危險。直到一種名為「IEen」的專業遠程控制工具出現，人們才清楚135埠究竟會有什麼樣的潛在安全威脅。</p>
<p>IEen工具能夠藉助135埠輕鬆連接到Internet上的其他工作站，並遠程控制該工作站的IE瀏覽器。例如，在瀏覽器中執行的任何操作，包括瀏覽頁面內容、輸入帳號密碼、輸入搜索關鍵字等，都會被IEen工具監控到。甚至在網上銀行中輸入的各種密碼信息，都能被IEen工具清楚地獲得。除了可以對遠程工作站上的IE瀏覽器進行*作、控制外，IEen工具通過135埠幾乎可以對所有的藉助DCOM開發技術設計出來的應用程式進行遠程控制，例如 IEen工具也能輕鬆進入到正在運行Excel的計算機中，直接對Excel進行各種編輯*作。</p>
<p>怎麼樣？135埠對外開放是不是很危險呀？當然，這種危險畢竟是理論上的，要想真正地通過135埠入侵其他系統，還必須提前知道對方的IP位址、帳號和密碼等。只要你嚴格保密好這些資訊，你的計算機被IEen工具攻擊的可能性幾乎不存在。</p>
<p>為什麼IEen工具能利用135埠攻擊其他計算機呢？原來該工具採用了一種DCOM技術，可以直接對其他工作站的DCOM程序進行遠程控制。DCOM技術與對方計算機進行通信時，會自動調用目標主機中的RPC服務，而RPC服務將自動詢問目標主機中的135埠，當前有哪些埠可以被用來通信。如此一來，目標主機就會提供一個可用的服務埠作為數據傳輸通道使用。在這一通信過程中，135埠的作用其實就是為RPC通信提供一種服務埠的映射功能。說簡單一點，135埠就是RPC通信中的橋樑。</p>
<h2 id="netbios-network-basic-inputoutput-system-簡介">NetBIOS (Network Basic Input/Output System) 簡介</h2>
<p>在討論port 137/138/139前，有必要簡單說一下NetBIOS協定，他是由IBM發展的網路通訊協定。NetBIOS提供以下三種功能。</p>
<ol>
<li>Name Service：主要功能類似DNS，提供IP與Hostname的註冊與對應解析。</li>
<li>Datagram：透過unicast、multicast 和 broadcast 提供無需連線，不可信賴的訊息傳遞。</li>
<li>Session：相較於Datagram，Session提供了點對點，可信類的訊息傳遞。</li>
</ol>
<p>上述NetBIOS的三個功能就分別對應了port 137/138/139。</p>
<p>NetBIOS Service</p>
<p>Port</p>
<p>Name service</p>
<p>port 137/TCP and port 137/UDP</p>
<p>Datagram service</p>
<p>port 138/UDP</p>
<p>Session service</p>
<p>port 139/TCP</p>
<h2 id="tcpudp-137-netbios-ns">TCP/UDP 137 NetBIOS-NS</h2>
<p>如前面所說，NetBIOS-NS主要作用是在區域網中提供computer的hostname與IP位址註冊與查詢服務，一般安裝了NetBIOS協議後，會自動處於開放狀態。在Windows 系統中使用 Windows Internet Name Service (WINS)來提供此功能。</p>
<p>要是非法入侵者知道目標主機的IP位址，並向該地址的137埠發送一個連接請求時，就可能獲得目標主機的相關名稱訊息。例如目標主機的hostname，註冊該目標主機的用戶信息，目標主機本次開機、關機時間等。此外非法入侵者還能知道目標主機是否是作為文件伺服器或主域控制器來使用。</p>
<p>NetBIOS-NS較常的見的為對廣播IP 137 Port進行連線，用以發現各台電腦。同時也有針對特定IP進行詢問的方式，進一步可去瞭解NetBIOS的節點類型。</p>
<h2 id="udp-138-netbios-datagram">UDP 138 NetBIOS-Datagram</h2>
<p>如前面所說，NetBIOS-Datagram 透過unicast、multicast 和 broadcast 提供無需連線，不可信賴的訊息傳遞。</p>
<h2 id="tcp139-netbios-session">TCP/139 NetBIOS-Session</h2>
<p>139埠是一種TCP埠，該埠在你通過網上鄰居訪問區域網中的共享文件或共享印表機時就能發揮作用。</p>
<p>139埠一旦被Internet上的某個攻擊者利用的話，就能成為一個危害極大的安全漏洞。因為攻擊者要是與目標主機的139埠建立連接的話，就很有可能瀏覽到指定網段內所有工作站中的全部共享信息，甚至可以對目標主機中的共享文件夾進行各種編輯、刪除*作，倘若攻擊者還知道目標主機的IP位址和登錄帳號的話，還能輕而易舉地查看到目標主機中的隱藏共享信息。</p>
<h2 id="445埠">445埠</h2>
<p>445埠也是一種TCP埠，該埠在Windows 2000 Server或Windows Server 2003系統中發揮的作用與139埠是完全相同的。具體地說，它也是提供區域網路中文件或印表機共享服務。不過該埠是基於CIFS協議（通用網際網路文件系統協議）工作的，而139埠是基於SMB協議（伺服器協議族）對外提供共享服務。同樣地，攻擊者與445埠建立請求連接，也能獲得指定區域網內的各種共享信息。</p>
<h2 id="參考網站">參考網站</h2>
<ul>
<li><a href="https://cifs.com/" target="_blank" rel="noopener noreffer ">https://cifs.com/</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc1001" target="_blank" rel="noopener noreffer ">https://datatracker.ietf.org/doc/html/rfc1001</a></li>
<li><a href="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-smb2/5606ad47-5ee0-437a-817e-70c366052962" target="_blank" rel="noopener noreffer ">https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-smb2/5606ad47-5ee0-437a-817e-70c366052962</a></li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新於 2021-05-05</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/cifs/">CIFS</a>,&nbsp;<a href="/tags/%E7%B6%B2%E8%B7%AF%E7%AE%A1%E7%90%86/">網路管理</a>,&nbsp;<a href="/tags/netbios/">NetBIOS</a>,&nbsp;<a href="/tags/network/">Network</a>,&nbsp;<a href="/tags/smb/">SMB</a>,&nbsp;<a href="/tags/wins/">WINS</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主頁</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/netcat-nc-commands/" class="prev" rel="prev" title="工具介紹-Netcat指令"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>工具介紹-Netcat指令</a>
            <a href="/posts/pstools/" class="next" rel="next" title="工具介紹-PsTools">工具介紹-PsTools<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.111.3">Hugo</a> 強力驅動 | 主題 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到頂部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看評論">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"複製到剪貼板","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
